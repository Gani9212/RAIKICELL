<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pembukuan Kasir - Raikicell</title>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

<style>
  /* Reset & base */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f0f4f8;
    color: #222;
  }
  /* Layout */
  .container {
    display: flex;
    min-height: 100vh;
  }
  nav.sidebar {
    width: 240px;
    background: #0a9396;
    color: white;
    display: flex;
    flex-direction: column;
    padding: 1rem 0;
  }
  nav.sidebar h2 {
    margin: 0 0 1rem 1.5rem;
    font-weight: 700;
  }
  nav.sidebar button {
    background: none;
    border: none;
    color: white;
    padding: 1rem 1.5rem;
    text-align: left;
    font-size: 1rem;
    cursor: pointer;
    border-left: 4px solid transparent;
    transition: background 0.3s, border-color 0.3s;
  }
  nav.sidebar button:hover,
  nav.sidebar button.active {
    background: #94d2bd;
    color: #005f73;
    border-left: 4px solid #005f73;
  }
  main.content {
    flex-grow: 1;
    padding: 2rem;
    overflow-y: auto;
  }
  h1 {
    margin-top: 0;
  }
  /* Form & Table styles */
  form {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-bottom: 2rem;
    max-width: 600px;
  }
  label {
    flex: 1 1 180px;
    display: flex;
    flex-direction: column;
    font-weight: 600;
  }
  input[type="text"], input[type="number"], input[type="date"], input[type="month"] {
    padding: 0.5rem;
    font-size: 1rem;
    border-radius: 5px;
    border: 1.5px solid #ccc;
    margin-top: 0.3rem;
  }
  button.submit-btn {
    padding: 0.7rem 1.6rem;
    background: #005f73;
    color: white;
    border: none;
    border-radius: 7px;
    cursor: pointer;
    align-self: flex-end;
    font-weight: 700;
    transition: background 0.3s ease;
  }
  button.submit-btn:hover {
    background: #0a9396;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    max-width: 900px;
  }
  th, td {
    padding: 0.8rem 1rem;
    border-bottom: 1px solid #ddd;
    text-align: left;
  }
  th {
    background: #94d2bd;
    color: #005f73;
  }
  tbody tr:hover {
    background: #e0fbfc;
  }
  button.delete-btn {
    background: #ee6c4d;
    border: none;
    padding: 0.3rem 0.8rem;
    color: white;
    border-radius: 5px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: background-color 0.3s ease;
  }
  button.delete-btn:hover {
    background: #d45233;
  }
  /* Notification */
  #notif {
    color: #ee6c4d;
    font-weight: 600;
    margin-bottom: 1rem;
  }
  /* Login Overlay */
  #loginOverlay {
    position: fixed; top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.6);
    display: flex; justify-content: center; align-items: center;
    z-index: 9999;
  }
  #loginBox {
    background: white; padding: 2rem; border-radius: 8px; width: 320px;
    box-shadow: 0 0 15px rgba(0,0,0,0.3);
    font-family: Arial, sans-serif;
  }
  #loginBox input {
    width: 100%; margin: 10px 0; padding: 10px; box-sizing: border-box;
    font-size: 1rem;
  }
  #loginBox button {
    width: 100%; padding: 10px; background: #0a9396; color: white;
    border: none; cursor: pointer; font-size: 1rem;
    border-radius: 6px;
  }
  #loginBox button:hover {
    background: #005f73;
  }
  #errorMsg {
    color: red; font-size: 0.9em; height: 1.2em;
    margin-top: 0.3rem;
  }
  body.not-logged-in > *:not(#loginOverlay) {
    display: none !important;
  }
</style>
</head>
<body class="not-logged-in">

<div id="loginOverlay">
  <div id="loginBox">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Username" autocomplete="off" />
    <input type="password" id="password" placeholder="Password" autocomplete="off" />
    <button id="loginBtn">Login</button>
    <div id="errorMsg"></div>
  </div>
</div>

<div class="container">
  <nav class="sidebar" role="navigation" aria-label="Sidebar Navigation">
    <h2>Raikicell POS</h2>
    <button class="nav-btn active" data-target="konter">Transaksi Konter</button>
    <button class="nav-btn" data-target="warung">Transaksi Warung</button>
    <button class="nav-btn" data-target="tarikTunai">Tarik Tunai</button>
    <button class="nav-btn" data-target="pengeluaran">Pengeluaran</button>
    <button class="nav-btn" data-target="adminBarang">Admin Barang</button>
    <button class="nav-btn" data-target="laporan">Laporan</button>
  </nav>
  <main class="content">
    <!-- KONTER -->
    <section id="konter" class="tab-content">
      <h1>Transaksi Konter</h1>
      <div id="notifKonter"></div>
      <form id="formKonter">
        <label>
          Nama Barang
          <input type="text" id="namaKonter" required />
        </label>
        <label>
          Harga (Rp)
          <input type="number" id="hargaKonter" min="0" required />
        </label>
        <label>
          Fee (Rp)
          <input type="number" id="feeKonter" min="0" required />
        </label>
        <button type="submit" class="submit-btn">Tambah</button>
      </form>
      <table>
        <thead>
          <tr>
            <th>Nama Barang</th>
            <th>Harga (Rp)</th>
            <th>Fee (Rp)</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="tableKonter"></tbody>
      </table>
    </section>

    <!-- WARUNG -->
    <section id="warung" class="tab-content" style="display:none;">
      <h1>Transaksi Warung</h1>
      <div id="notifWarung"></div>
      <form id="formWarung">
        <label>
          Nama Barang
          <input type="text" id="namaWarung" required />
        </label>
        <label>
          Harga (Rp)
          <input type="number" id="hargaWarung" min="0" required />
        </label>
        <label>
          Fee (Rp)
          <input type="number" id="feeWarung" min="0" required />
        </label>
        <button type="submit" class="submit-btn">Tambah</button>
      </form>
      <table>
        <thead>
          <tr>
            <th>Nama Barang</th>
            <th>Harga (Rp)</th>
            <th>Fee (Rp)</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="tableWarung"></tbody>
      </table>
    </section>

    <!-- TARIK TUNAI -->
    <section id="tarikTunai" class="tab-content" style="display:none;">
      <h1>Tarik Tunai</h1>
      <div id="notifTarik"></div>
      <form id="formTarik">
        <label>
          Jumlah (Rp)
          <input type="number" id="jumlahTarik" min="0" required />
        </label>
        <label>
          Fee (Rp)
          <input type="number" id="feeTarik" min="0" required />
        </label>
        <button type="submit" class="submit-btn">Tambah</button>
      </form>
      <table>
        <thead>
          <tr>
            <th>Jumlah (Rp)</th>
            <th>Fee (Rp)</th>
            <th>Tanggal</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="tableTarik"></tbody>
      </table>
    </section>

    <!-- PENGELUARAN -->
    <section id="pengeluaran" class="tab-content" style="display:none;">
      <h1>Pengeluaran</h1>
      <div id="notifPengeluaran"></div>
      <form id="formPengeluaran">
        <label>
          Nama Pengeluaran
          <input type="text" id="namaPengeluaran" required />
        </label>
        <label>
          Jumlah (Rp)
          <input type="number" id="jumlahPengeluaran" min="0" required />
        </label>
        <button type="submit" class="submit-btn">Tambah</button>
      </form>
      <table>
        <thead>
          <tr>
            <th>Nama Pengeluaran</th>
            <th>Jumlah (Rp)</th>
            <th>Tanggal</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="tablePengeluaran"></tbody>
      </table>
    </section>

    <!-- ADMIN BARANG -->
    <section id="adminBarang" class="tab-content" style="display:none;">
      <h1>Admin Barang</h1>
      <div id="notifAdmin"></div>
      <form id="formAdmin">
        <label>
          Nama Barang
          <input type="text" id="namaAdmin" required />
        </label>
        <label>
          Harga (Rp)
          <input type="number" id="hargaAdmin" min="0" required />
        </label>
        <label>
          Fee (Rp)
          <input type="number" id="feeAdmin" min="0" required />
        </label>
        <button type="submit" class="submit-btn">Tambah</button>
      </form>
      <input type="text" id="searchAdmin" placeholder="Cari nama barang..." style="padding:0.5rem; margin-bottom:1rem; width: 300px; border-radius:5px; border:1.5px solid #ccc;" />
      <table>
        <thead>
          <tr>
            <th>Nama Barang</th>
            <th>Harga (Rp)</th>
            <th>Fee (Rp)</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="tableAdmin"></tbody>
      </table>
    </section>

    <!-- LAPORAN -->
    <section id="laporan" class="tab-content" style="display:none;">
      <h1>Laporan</h1>
      <label>
        Pilih Bulan
        <input type="month" id="bulanLaporan" value="" />
      </label>
      <button id="btnGenerateLaporan" class="submit-btn" style="margin-left: 1rem;">Tampilkan</button>
      <div id="laporanResult" style="margin-top:1rem;"></div>
    </section>
  </main>
</div>

<script>
  // --- Firebase config & init ---
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "raikicell.firebaseapp.com",
    databaseURL: "https://raikicell-default-rtdb.firebaseio.com",
    projectId: "raikicell",
    storageBucket: "raikicell.appspot.com",
    messagingSenderId: "648628376778",
    appId: "1:648628376778:web:961ca9084abeeb206bd033"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // --- Utility functions ---
  function formatRupiah(number) {
    return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR' }).format(number);
  }

  // --- Tab Navigation ---
  const navButtons = document.querySelectorAll('nav.sidebar .nav-btn');
  const tabContents = document.querySelectorAll('main.content .tab-content');

  navButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      navButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      const target = btn.dataset.target;
      tabContents.forEach(tc => {
        tc.style.display = (tc.id === target) ? 'block' : 'none';
      });
    });
  });

  // --- Notification elements ---
  const notifKonter = document.getElementById('notifKonter');
  const notifWarung = document.getElementById('notifWarung');
  const notifTarik = document.getElementById('notifTarik');
  const notifPengeluaran = document.getElementById('notifPengeluaran');
  const notifAdmin = document.getElementById('notifAdmin');

  // --- RENDER & CRUD functions per section ---

  // 1. Transaksi Konter
  const konterRef = db.ref('transaksiKonter');
  const formKonter = document.getElementById('formKonter');
  const tableKonter = document.getElementById('tableKonter');

  function renderKonter(data) {
    tableKonter.innerHTML = '';
    if (!data) return;
    Object.entries(data).forEach(([key, item]) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${item.nama}</td>
        <td>${formatRupiah(item.harga)}</td>
        <td>${formatRupiah(item.fee)}</td>
        <td><button class="delete-btn" data-key="${key}">Hapus</button></td>
      `;
      tableKonter.appendChild(tr);
    });
    tableKonter.querySelectorAll('.delete-btn').forEach(btn => {
      btn.onclick = () => {
        if(confirm('Yakin ingin menghapus transaksi?')) {
          konterRef.child(btn.dataset.key).remove();
        }
      };
    });
  }
  konterRef.on('value', snap => renderKonter(snap.val()));

  formKonter.addEventListener('submit', e => {
    e.preventDefault();
    const nama = formKonter.namaKonter.value.trim();
    const harga = Number(formKonter.hargaKonter.value);
    const fee = Number(formKonter.feeKonter.value);
    if(!nama || harga < 0 || fee < 0) return alert('Data tidak valid');
    konterRef.push({ nama, harga, fee })
      .then(() => {
        notifKonter.textContent = 'Berhasil tambah transaksi konter.';
        formKonter.reset();
        setTimeout(() => notifKonter.textContent = '', 3000);
      })
      .catch(() => notifKonter.textContent = 'Gagal tambah transaksi.');
  });

  // 2. Transaksi Warung
  const warungRef = db.ref('transaksiWarung');
  const formWarung = document.getElementById('formWarung');
  const tableWarung = document.getElementById('tableWarung');
  const notifWarungEl = notifWarung;

  function renderWarung(data) {
    tableWarung.innerHTML = '';
    if (!data) return;
    Object.entries(data).forEach(([key, item]) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${item.nama}</td>
        <td>${formatRupiah(item.harga)}</td>
        <td>${formatRupiah(item.fee)}</td>
        <td><button class="delete-btn" data-key="${key}">Hapus</button></td>
      `;
      tableWarung.appendChild(tr);
    });
    tableWarung.querySelectorAll('.delete-btn').forEach(btn => {
      btn.onclick = () => {
        if(confirm('Yakin ingin menghapus transaksi?')) {
          warungRef.child(btn.dataset.key).remove();
        }
      };
    });
  }
  warungRef.on('value', snap => renderWarung(snap.val()));

  formWarung.addEventListener('submit', e => {
    e.preventDefault();
    const nama = formWarung.namaWarung.value.trim();
    const harga = Number(formWarung.hargaWarung.value);
    const fee = Number(formWarung.feeWarung.value);
    if(!nama || harga < 0 || fee < 0) return alert('Data tidak valid');
    warungRef.push({ nama, harga, fee })
      .then(() => {
        notifWarungEl.textContent = 'Berhasil tambah transaksi warung.';
        formWarung.reset();
        setTimeout(() => notifWarungEl.textContent = '', 3000);
      })
      .catch(() => notifWarungEl.textContent = 'Gagal tambah transaksi.');
  });

  // 3. Tarik Tunai
  const tarikRef = db.ref('tarikTunai');
  const formTarik = document.getElementById('formTarik');
  const tableTarik = document.getElementById('tableTarik');
  const notifTarikEl = notifTarik;

  function renderTarik(data) {
    tableTarik.innerHTML = '';
    if (!data) return;
    Object.entries(data).forEach(([key, item]) => {
      const tgl = new Date(item.tanggal).toLocaleDateString('id-ID');
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${formatRupiah(item.jumlah)}</td>
        <td>${formatRupiah(item.fee)}</td>
        <td>${tgl}</td>
        <td><button class="delete-btn" data-key="${key}">Hapus</button></td>
      `;
      tableTarik.appendChild(tr);
    });
    tableTarik.querySelectorAll('.delete-btn').forEach(btn => {
      btn.onclick = () => {
        if(confirm('Yakin ingin menghapus transaksi?')) {
          tarikRef.child(btn.dataset.key).remove();
        }
      };
    });
  }
  tarikRef.on('value', snap => renderTarik(snap.val()));

  formTarik.addEventListener('submit', e => {
    e.preventDefault();
    const jumlah = Number(formTarik.jumlahTarik.value);
    const fee = Number(formTarik.feeTarik.value);
    if(jumlah < 0 || fee < 0) return alert('Data tidak valid');
    tarikRef.push({ jumlah, fee, tanggal: new Date().toISOString() })
      .then(() => {
        notifTarikEl.textContent = 'Berhasil tambah tarik tunai.';
        formTarik.reset();
        setTimeout(() => notifTarikEl.textContent = '', 3000);
      })
      .catch(() => notifTarikEl.textContent = 'Gagal tambah tarik tunai.');
  });

  // 4. Pengeluaran
  const pengeluaranRef = db.ref('pengeluaran');
  const formPengeluaran = document.getElementById('formPengeluaran');
  const tablePengeluaran = document.getElementById('tablePengeluaran');
  const notifPengeluaranEl = notifPengeluaran;

  function renderPengeluaran(data) {
    tablePengeluaran.innerHTML = '';
    if (!data) return;
    Object.entries(data).forEach(([key, item]) => {
      const tgl = new Date(item.tanggal).toLocaleDateString('id-ID');
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${item.nama}</td>
        <td>${formatRupiah(item.jumlah)}</td>
        <td>${tgl}</td>
        <td><button class="delete-btn" data-key="${key}">Hapus</button></td>
      `;
      tablePengeluaran.appendChild(tr);
    });
    tablePengeluaran.querySelectorAll('.delete-btn').forEach(btn => {
      btn.onclick = () => {
        if(confirm('Yakin ingin menghapus pengeluaran?')) {
          pengeluaranRef.child(btn.dataset.key).remove();
        }
      };
    });
  }
  pengeluaranRef.on('value', snap => renderPengeluaran(snap.val()));

  formPengeluaran.addEventListener('submit', e => {
    e.preventDefault();
    const nama = formPengeluaran.namaPengeluaran.value.trim();
    const jumlah = Number(formPengeluaran.jumlahPengeluaran.value);
    if(!nama || jumlah < 0) return alert('Data tidak valid');
    pengeluaranRef.push({ nama, jumlah, tanggal: new Date().toISOString() })
      .then(() => {
        notifPengeluaranEl.textContent = 'Berhasil tambah pengeluaran.';
        formPengeluaran.reset();
        setTimeout(() => notifPengeluaranEl.textContent = '', 3000);
      })
      .catch(() => notifPengeluaranEl.textContent = 'Gagal tambah pengeluaran.');
  });

  // 5. Admin Barang
  const adminRef = db.ref('adminBarang');
  const formAdmin = document.getElementById('formAdmin');
  const tableAdmin = document.getElementById('tableAdmin');
  const notifAdminEl = notifAdmin;
  const searchAdminInput = document.getElementById('searchAdmin');

  let allAdminData = {};

  function renderAdmin(data, filter = '') {
    tableAdmin.innerHTML = '';
    if (!data) return;
    allAdminData = data;
    const filtered = Object.entries(data).filter(([key, item]) => 
      item.nama.toLowerCase().includes(filter.toLowerCase())
    );
    filtered.forEach(([key, item]) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${item.nama}</td>
        <td>${formatRupiah(item.harga)}</td>
        <td>${formatRupiah(item.fee)}</td>
        <td><button class="delete-btn" data-key="${key}">Hapus</button></td>
      `;
      tableAdmin.appendChild(tr);
    });
    tableAdmin.querySelectorAll('.delete-btn').forEach(btn => {
      btn.onclick = () => {
        if(confirm('Yakin ingin menghapus barang?')) {
          adminRef.child(btn.dataset.key).remove();
        }
      };
    });
  }
  adminRef.on('value', snap => renderAdmin(snap.val()));

  formAdmin.addEventListener('submit', e => {
    e.preventDefault();
    const nama = formAdmin.namaAdmin.value.trim();
    const harga = Number(formAdmin.hargaAdmin.value);
    const fee = Number(formAdmin.feeAdmin.value);
    if(!nama || harga < 0 || fee < 0) return alert('Data tidak valid');
    adminRef.push({ nama, harga, fee })
      .then(() => {
        notifAdminEl.textContent = 'Berhasil tambah barang.';
        formAdmin.reset();
        setTimeout(() => notifAdminEl.textContent = '', 3000);
      })
      .catch(() => notifAdminEl.textContent = 'Gagal tambah barang.');
  });

  searchAdminInput.addEventListener('input', () => {
    renderAdmin(allAdminData, searchAdminInput.value);
  });

  // 6. Laporan
  const laporanResult = document.getElementById('laporanResult');
  const bulanInput = document.getElementById('bulanLaporan');
  const btnGenerate = document.getElementById('btnGenerateLaporan');

  // Default bulan sekarang yyyy-mm
  const now = new Date();
  bulanInput.value = now.toISOString().slice(0,7);

  btnGenerate.addEventListener('click', () => {
    const bulan = bulanInput.value; // format yyyy-mm
    if(!bulan) return alert('Pilih bulan dahulu');

    // Ambil data semua transaksi di bulan tersebut
    const startDate = new Date(bulan + '-01T00:00:00');
    const endDate = new Date(startDate);
    endDate.setMonth(endDate.getMonth() + 1);

    // Helper filter by date range
    function filterByDate(data) {
      if(!data) return [];
      return Object.values(data).filter(item => {
        const tgl = new Date(item.tanggal || item.createdAt || new Date());
        return tgl >= startDate && tgl < endDate;
      });
    }

    Promise.all([
      konterRef.get(),
      warungRef.get(),
      tarikRef.get(),
      pengeluaranRef.get()
    ]).then(([konterSnap, warungSnap, tarikSnap, pengeluaranSnap]) => {
      const konterData = konterSnap.val() || {};
      const warungData = warungSnap.val() || {};
      const tarikData = tarikSnap.val() || {};
      const pengeluaranData = pengeluaranSnap.val() || {};

      // Filter tarik & pengeluaran by date (transaksi konter/warung no date so assume all in month)
      // But konter & warung data punya createdAt?
      // Kalau tidak ada tanggal, kita anggap semua valid (karena mereka tidak pakai tanggal)
      // Jadi filter konter/warung by default all, tarik & pengeluaran by date

      // Calculate total
      // Konter
      let totalKonter = 0;
      Object.values(konterData).forEach(t => {
        totalKonter += t.harga - t.fee;
      });
      // Warung
      let totalWarung = 0;
      Object.values(warungData).forEach(t => {
        totalWarung += t.harga - t.fee;
      });
      // Tarik tunai
      let totalTarik = 0;
      Object.values(tarikData).forEach(t => {
        const tgl = new Date(t.tanggal);
        if(tgl >= startDate && tgl < endDate) totalTarik += t.jumlah + t.fee;
      });
      // Pengeluaran
      let totalPengeluaran = 0;
      Object.values(pengeluaranData).forEach(t => {
        const tgl = new Date(t.tanggal);
        if(tgl >= startDate && tgl < endDate) totalPengeluaran += t.jumlah;
      });

      const keuntungan = totalKonter + totalWarung - totalTarik - totalPengeluaran;

      laporanResult.innerHTML = `
        <h2>Laporan Bulan ${bulan}</h2>
        <ul>
          <li>Total Penjualan Konter: ${formatRupiah(totalKonter)}</li>
          <li>Total Penjualan Warung: ${formatRupiah(totalWarung)}</li>
          <li>Total Tarik Tunai: ${formatRupiah(totalTarik)}</li>
          <li>Total Pengeluaran: ${formatRupiah(totalPengeluaran)}</li>
          <li><strong>Keuntungan Bersih: ${formatRupiah(keuntungan)}</strong></li>
        </ul>
      `;
    }).catch(err => {
      laporanResult.textContent = 'Gagal ambil data laporan: ' + err.message;
    });
  });

  // --- LOGIN ---
  const loginOverlay = document.getElementById('loginOverlay');
  const loginBtn = document.getElementById('loginBtn');
  const usernameInput = document.getElementById('username');
  const passwordInput = document.getElementById('password');
  const errorMsg = document.getElementById('errorMsg');

  // Example credential (ganti sesuai keperluan)
  const credentials = {
    admin: 'raiki123',
    kasir: 'kasir123'
  };

  function login(username, password) {
    if(credentials[username] && credentials[username] === password) {
      localStorage.setItem('loggedUser', username);
      errorMsg.textContent = '';
      document.body.classList.remove('not-logged-in');
      loginOverlay.style.display = 'none';
    } else {
      errorMsg.textContent = 'Username atau password salah';
    }
  }

  loginBtn.addEventListener('click', () => {
    login(usernameInput.value.trim(), passwordInput.value.trim());
  });

  passwordInput.addEventListener('keypress', e => {
    if(e.key === 'Enter') loginBtn.click();
  });

  // Auto-login if saved
  const savedUser = localStorage.getItem('loggedUser');
  if(savedUser && credentials[savedUser]) {
    document.body.classList.remove('not-logged-in');
    loginOverlay.style.display = 'none';
  }
</script>

</body>
</html>
